aes(label = info, x = x - 2.9, y = y - .8), hjust = 0) +
coord_fixed() +
scale_fill_brewer(type = "qual",palette = "Dark2") +
theme_void() +
guides(fill = FALSE)
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .8), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .8), hjust = 0) +
coord_fixed() +
scale_fill_brewer(type = "qual",palette = "Dark2") +
theme_void() +
guides(fill = FALSE)
gg = data.frame(x = c(2, 8.5, 15, 21.5), y = rep(6.5, 4), h = rep(4.25, 4), w = rep(6.25, 4),
value = c(as.character(comma_format()(nrow(dat))),
as.character(round(mean(filter(dat, store=="google_play")$stars),1)),
as.character(round(mean(filter(dat, store=="apple")$stars)),1),
as.character(round(mean(filter(dat, store=="apple")$stars)),1)),
info = c("Total Number of Reviews",
"Google Play Review",
"Apple Review",
"Apple Review"),
shape = fontawesome(search_fontawesome("chart"))[1:4],
font_family = c(rep("fontawesome-webfont", 4)),
color = factor(1:4)
)
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .8), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .8), hjust = 0) +
coord_fixed() +
scale_fill_brewer(type = "qual",palette = "Dark2") +
theme_void() +
guides(fill = FALSE)
gg = data.frame(x = c(2, 8.5, 15, 21.5), y = rep(6.5, 4), h = rep(4.25, 4), w = rep(6.25, 4),
value = c(as.character(comma_format()(nrow(filter(dat, store=="google_play")))),
as.character(round(mean(filter(dat, store=="google_play")$stars),1)),
as.character(comma_format()(nrow(filter(dat, store=="apple")))),
as.character(round(mean(filter(dat, store=="apple")$stars)),1)),
info = c("Google Play Reviews",
"Google Play Rating",
"Apple Reviews",
"Apple Rating"),
shape = fontawesome(search_fontawesome("chart"))[1:4],
font_family = c(rep("fontawesome-webfont", 4)),
color = factor(1:4)
)
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .8), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .8), hjust = 0) +
coord_fixed() +
scale_fill_brewer(type = "qual",palette = "Dark2") +
theme_void() +
guides(fill = FALSE)
gg = data.frame(x = c(2, 8.5, 15, 21.5), y = rep(1, 4), h = rep(4.25, 4), w = rep(6.25, 4),
value = c(as.character(comma_format()(nrow(filter(dat, store=="google_play")))),
as.character(round(mean(filter(dat, store=="google_play")$stars),1)),
as.character(comma_format()(nrow(filter(dat, store=="apple")))),
as.character(round(mean(filter(dat, store=="apple")$stars)),1)),
info = c("Google Play Reviews",
"Google Play Rating",
"Apple Reviews",
"Apple Rating"),
shape = fontawesome(search_fontawesome("chart"))[1:4],
font_family = c(rep("fontawesome-webfont", 4)),
color = factor(1:4)
)
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .8), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .8), hjust = 0) +
coord_fixed() +
scale_fill_brewer(type = "qual",palette = "Dark2") +
theme_void() +
guides(fill = FALSE)
gg = data.frame(x = c(2, 8.5, 15, 21.5), y = rep(1, 4), h = rep(4.25, 4), w = rep(6.25, 4),
value = c(as.character(comma_format()(nrow(filter(dat, store=="google_play")))),
as.character(round(mean(filter(dat, store=="google_play")$stars),1)),
as.character(comma_format()(nrow(filter(dat, store=="apple")))),
as.character(round(mean(filter(dat, store=="apple")$stars)),1)),
info = c("Google Play Reviews",
"Google Play Rating",
"Apple Reviews",
"Apple Rating"),
shape = fontawesome(search_fontawesome("chart"))[1:4],
font_family = c(rep("fontawesome-webfont", 4)),
color = factor(1:4)
)
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .8), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .8), hjust = 0) +
coord_fixed() +
scale_fill_brewer(type = "qual",palette = "Dark2") +
theme_void() +
guides(fill = FALSE)
gg = data.frame(x = c(2, 8.5, 15, 21.5), y = rep(10, 4), h = rep(4.25, 4), w = rep(6.25, 4),
value = c(as.character(comma_format()(nrow(filter(dat, store=="google_play")))),
as.character(round(mean(filter(dat, store=="google_play")$stars),1)),
as.character(comma_format()(nrow(filter(dat, store=="apple")))),
as.character(round(mean(filter(dat, store=="apple")$stars)),1)),
info = c("Google Play Reviews",
"Google Play Rating",
"Apple Reviews",
"Apple Rating"),
shape = fontawesome(search_fontawesome("chart"))[1:4],
font_family = c(rep("fontawesome-webfont", 4)),
color = factor(1:4)
)
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .8), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .8), hjust = 0) +
coord_fixed() +
scale_fill_brewer(type = "qual",palette = "Dark2") +
theme_void() +
guides(fill = FALSE)
gg = data.frame(x = c(2, 8.5, 15, 21.5), y = rep(0, 4), h = rep(4.25, 4), w = rep(6.25, 4),
value = c(as.character(comma_format()(nrow(filter(dat, store=="google_play")))),
as.character(round(mean(filter(dat, store=="google_play")$stars),1)),
as.character(comma_format()(nrow(filter(dat, store=="apple")))),
as.character(round(mean(filter(dat, store=="apple")$stars)),1)),
info = c("Google Play Reviews",
"Google Play Rating",
"Apple Reviews",
"Apple Rating"),
shape = fontawesome(search_fontawesome("chart"))[1:4],
font_family = c(rep("fontawesome-webfont", 4)),
color = factor(1:4)
)
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .8), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .8), hjust = 0) +
coord_fixed() +
scale_fill_brewer(type = "qual",palette = "Dark2") +
theme_void() +
guides(fill = FALSE)
gg
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .8), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .8), hjust = 0) +
coord_fixed() +
scale_fill_brewer(type = "qual",palette = "Dark2") +
theme_void() +
guides(fill = FALSE)
gg = data.frame(x = c(2, 8.5, 15, 21.5), y = rep(1110, 4), h = rep(4.25, 4), w = rep(6.25, 4),
value = c(as.character(comma_format()(nrow(filter(dat, store=="google_play")))),
as.character(round(mean(filter(dat, store=="google_play")$stars),1)),
as.character(comma_format()(nrow(filter(dat, store=="apple")))),
as.character(round(mean(filter(dat, store=="apple")$stars)),1)),
info = c("Google Play Reviews",
"Google Play Rating",
"Apple Reviews",
"Apple Rating"),
shape = fontawesome(search_fontawesome("chart"))[1:4],
font_family = c(rep("fontawesome-webfont", 4)),
color = factor(1:4)
)
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .8), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .8), hjust = 0) +
coord_fixed() +
scale_fill_brewer(type = "qual",palette = "Dark2") +
theme_void() +
guides(fill = FALSE)
gg
gg = data.frame(x = c(2, 8.5, 15, 21.5), y = rep(1110, 4), h = rep(4.25, 4), w = rep(6.25, 4),
value = c(as.character(comma_format()(nrow(filter(dat, store=="google_play")))),
as.character(round(mean(filter(dat, store=="google_play")$stars),1)),
as.character(comma_format()(nrow(filter(dat, store=="apple")))),
as.character(round(mean(filter(dat, store=="apple")$stars)),1)),
info = c("Google Play Reviews",
"Google Play Rating",
"Apple Reviews",
"Apple Rating"),
shape = fontawesome(search_fontawesome("chart"))[1:4],
font_family = c(rep("fontawesome-webfont", 4)),
color = factor(1:4)
)
gg
gg
?geom_tile
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color))
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .8), hjust = 0)
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .8), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .8), hjust = 0)
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .8), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .8), hjust = 0) +
coord_fixed()
?coord_fixed
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .8), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .8), hjust = 0) +
coord_fixed()
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .8), hjust = 0)
gg = data.frame(x = c(2, 8.5, 15, 21.5), y = rep(1, 4), h = rep(4.25, 4), w = rep(6.25, 4),
value = c(as.character(comma_format()(nrow(filter(dat, store=="google_play")))),
as.character(round(mean(filter(dat, store=="google_play")$stars),1)),
as.character(comma_format()(nrow(filter(dat, store=="apple")))),
as.character(round(mean(filter(dat, store=="apple")$stars)),1)),
info = c("Google Play Reviews",
"Google Play Rating",
"Apple Reviews",
"Apple Rating"),
shape = fontawesome(search_fontawesome("chart"))[1:4],
font_family = c(rep("fontawesome-webfont", 4)),
color = factor(1:4)
)
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .4), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .4), hjust = 0) +
coord_fixed() +
scale_fill_brewer(type = "qual",palette = "Dark2") +
theme_void() +
guides(fill = FALSE)
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .4), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .4), hjust = 0) +
coord_fixed(ratio=1) +
scale_fill_brewer(type = "qual",palette = "Dark2") +
theme_void() +
guides(fill = FALSE)
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .6), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .6), hjust = 0) +
coord_fixed(ratio=1) +
scale_fill_brewer(type = "qual",palette = "Dark2") +
theme_void() +
guides(fill = FALSE) +
ggsave('plot.jpg', width = 6, height = 1.5, dpi = 300)
gg = data.frame(x = c(2, 8.5, 15, 21.5), y = rep(1, 4), h = rep(4.25, 4), w = rep(6.25, 4),
value = c(as.character(comma_format()(nrow(filter(dat, store=="google_play")))),
as.character(round(mean(filter(dat, store=="google_play")$stars),1)),
as.character(comma_format()(nrow(filter(dat, store=="apple")))),
as.character(round(mean(filter(dat, store=="apple")$stars)),1)),
info = c("Google Play Reviews",
"Google Play Rating",
"Apple Reviews",
"Apple Rating"),
shape = fontawesome(search_fontawesome("chart"))[1:4],
font_family = c(rep("fontawesome-webfont", 4)),
color = factor(1:4)
)
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .6), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .6), hjust = 0) +
coord_fixed(ratio=1) +
scale_fill_brewer(type = "qual",palette = "Dark2") +
theme_void() +
guides(fill = FALSE) +
theme(plot.margin=grid::unit(c(0,0,0,0), "mm"))
ggplot(gg, aes(x, y, height = h, width = w, label = info)) +
geom_tile(aes(fill = color)) +
geom_text(color = "white", fontface = "bold", size = 10,
aes(label = value, x = x - 2.7, y = y + .6), hjust = 0) +
geom_text(color = "white", fontface = "bold",
aes(label = info, x = x - 2.9, y = y - .6), hjust = 0) +
coord_fixed(ratio=1) +
scale_fill_brewer(type = "qual",palette = "Dark2") +
theme_void() +
guides(fill = FALSE) +
theme(axis.title.x=element_blank())
gg = group_by(dat, store, version) %>%
summarise(ci=1.96*sd(stars)/sqrt(n()), stars=mean(stars), nu=n())
gg
gg = group_by(dat, store, version) %>%
summarise(ci=1.96*sd(stars)/sqrt(n()), stars=mean(stars), nu=n())
ggplot(gg, aes(x=version, y=stars, col=store, group=store)) + geom_point() +
geom_errorbar(aes(ymin=stars-ci, ymax=stars+ci), width=.2) +
facet_wrap(~store, nrow=2, scales="free_x") +
scale_y_continuous("Stars", breaks=pretty_breaks(n=8))
gg = group_by(dat, store, version) %>%
summarise(ci=1.96*sd(stars)/sqrt(n()), stars=mean(stars), nu=n())
ggplot(gg, aes(x=version, y=stars, col=store, group=store)) + geom_point() +
geom_errorbar(aes(ymin=stars-ci, ymax=stars+ci), width=.2) +
facet_wrap(~store, nrow=2, scales="free_x") +
scale_y_continuous("Stars", breaks=pretty_breaks(n=8))
gg
gg
rm(list=ls())
options(dplyr.width = Inf)
options(dplyr.print_max = 1e9)
library(RMySQL)
library(RPostgreSQL)
library(dplyr)
library(knitr)
library(ggplot2)
library(jsonlite)
library(scales)
library(kableExtra)
library(reshape2)
library(formattable)
library(glue)
library(emojifont)
levels1 = c("1.0", "1.1", "1.2", "1.3", "1.4", "1.5", "1.6", "1.7", "1.8", "1.9",
"1.10", "1.11")
raw = read.csv("reviews_dat.csv", stringsAsFactors=F)
dat = raw
dat$version = factor(dat$version, levels=levels1)
group_by(dat, version) %>% summarise(n())
dat = raw
unique(dat$version)
classs(unique(dat$version))
class(unique(dat$version))
install.packages("randomForest")
setwd("//hhg-gtv-fs01.hhg.hhgames.ca//home//klau//2018//HH//Jessie")
rm(list=ls())
library(RPostgreSQL)
library(ggplot2)
library(dplyr)
library(tidyr)
library(forecast)
library(glue)
library(lubridate)
library(mgcv)
library(scales)
library(randomForest)
library(reshape2)
library(rpart)
drv <- dbDriver('PostgreSQL')
conn  <- dbConnect(drv,
host = 'db-analytics.hhgames.ca',
port = 5439,
dbname = 'prod',
user = "klau",
password ="Klaupassword1!")
# Hero Hunters
quer = "
select teamid, first_contact_day,
case when country in ('US') then 'US' else 'Tier2' end as country,
case when kochava_campaign_type in ('Video (WW Launch)','Video') then 'Video'
else kochava_campaign_type end as kochava_campaign_type,
vendor_first_contact as vendor,
datediff(day, first_contact_day, current_date) as age,
time_played_lt/60.0 as timeplayed, iap_lt as iap_rev, tapjoy_lt as tapjoy_rev
from survivors_user_summary
where vendor_first_contact in ('Apple','GooglePlay') and first_contact_day >= '2018-02-01' and
first_contact_day <= '2018-08-31' and
country in ('US','GB','FR','JP','DE','KR') and
kochava_campaign_type in ('Organic','Video (WW Launch)','Video','Facebook') and
tapjoy_lt + iap_lt > 0
"
raw_hh = dbGetQuery(conn, quer)
dat = mutate(raw_hh, conv=iap_rev>0)
mean(dat$age)
mean(dat$timeplayed)
mean(dat$tapjoy_rev)
mean(dat$iap_rev)
train = dat
fit = lm(iap_rev ~ age + vendor + tapjoy_rev, data=filter(train,country=="US" & kochava_campaign_type=="Organic"))
summary(fit)
fit = lm(iap_rev ~ age + vendor + timeplayed + tapjoy_rev, data=filter(train,country=="US" & kochava_campaign_type=="Organic"))
summary(fit)
fit = lm(iap_rev ~ age + vendor + timeplayed + tapjoy_rev, data=filter(filter(train,country=="US" & kochava_campaign_type=="Organic"),iap_rev>0))
summary(fit)
fit = lm(iap_rev ~ vendor + tapjoy_rev, data=filter(train,country=="US" & kochava_campaign_type=="Organic"))
summary(fit)
fit = lm(iap_rev ~ vendor + timeplayed + tapjoy_rev, data=filter(train,country=="US" & kochava_campaign_type=="Organic"))
summary(fit)
fit = lm(iap_rev ~ vendor + timeplayed + tapjoy_rev, data=filter(filter(train,country=="US" & kochava_campaign_type=="Organic"),iap_rev>0))
summary(fit)
fit = lm(iap_rev ~ age + vendor + tapjoy_rev, data=filter(train,country=="US" & kochava_campaign_type!="Organic"))
summary(fit)
fit = lm(iap_rev ~ age + vendor + timeplayed + tapjoy_rev, data=filter(train,country=="US" & kochava_campaign_type!="Organic"))
summary(fit)
fit = lm(iap_rev ~ age + country + vendor + timeplayed + kochava_campaign_type*tapjoy_rev, data=train)
summary(fit)
fit = lm(iap_rev ~ age + kochava_campaign_type + vendor + timeplayed + country*tapjoy_rev, data=train)
summary(fit)
install.packages(c("maps", "mapproj"))
library(maps)
library(mapproj)
source("census-app/helpers.R")
rm(list=ls())
options(dplyr.width = Inf)
options(dplyr.print_max = 1e9)
library(dplyr)
library(tictoc)
library(RPostgreSQL)
library(glue)
library(ggplot2)
library(scales)
library(afapi)
library(knitr)
library(kableExtra)
library(formattable)
library(stringr)
library(tm)
library(circlize)
library(yarrr)
library(ggraph)
library(lubridate)
library(jsonlite)
library(reshape2)
library(tidytext)
library(tidyr)
USERNAME = "klau@hotheadgames.com"
PASSWORD = "password123"
API_KEY = "40c7903b047c4395aa488f5f2c26697d"
BASE_URI = "https://api.appfigures.com/v2"
start_date1 = as.Date("2020-05-01")
p_name1 = c("Idle Golf","Idle Golf Tycoon")
game1 = "golf"
usage = getUsage()
all_prods = getProducts()
library(httr)
library(curl)
usage = getUsage()
update.packages("RCurl")
uninstall.packages("RCurl")
library(installr)
uninstall.packages("RCurl")
uninstall.packages("afapi")
uninstall.packages("RCurl")
install.packages("afapi")
devtools::install_github("appfigures/afapi")
devtools::install_github("appfigures/afapi")
usage = getUsage()
library(afapi)
devtools::install_github("appfigures/afapi")
install.packages("RCurl")
install.packages("jsonlite")
devtools::install_github("appfigures/afapi")
devtools::install_github("appfigures/afapi")
ys.setenv(R_REMOTES_NO_ERRORS_FROM_WARNINGS=TRUE)
Sys.setenv(R_REMOTES_NO_ERRORS_FROM_WARNINGS=TRUE)
devtools::install_github("appfigures/afapi")
library(afapi)
USERNAME = "klau@hotheadgames.com"
PASSWORD = "password123"
API_KEY = "40c7903b047c4395aa488f5f2c26697d"
BASE_URI = "https://api.appfigures.com/v2"
usage = getUsage()
usage = getUsage()
library(afapi)
usage = getUsage()
BASE_URI = "https://api.appfigures.com/v2"
usage = getUsage()
USERNAME = "klau@hotheadgames.com"
PASSWORD = "password123"
API_KEY = "40c7903b047c4395aa488f5f2c26697d"
BASE_URI = "https://api.appfigures.com/v2"
usage = getUsage()
BASE_URI = "http://api.appfigures.com/v2"
usage = getUsage()
BASE_URI = "https://api.appfigures.com/v2"
usage = getUsage()
usage = getUsage()
setwd("C://Users//klau//Desktop//Work//Github_Ken//Stocks")
rm(list=ls())
library(dplyr)
library(lubridate)
library(reshape2)
library(glue)
library(ggplot2)
library(scales)
library(tidyquant)
library(rvest)
library(magrittr)
library(stringr)
